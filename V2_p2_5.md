# 2.5. Development Tools Configuration

This guide describes the setup of development tools to ensure consistent code style, high quality, and automated checks in the project.

## 1. Code Style Setup

The goal is to ensure consistent code formatting across all team members, regardless of their local IDE settings.

### 1.1. EditorConfig

-   **Purpose:** The `.editorconfig` file in the project root allows defining basic code style rules (indent size, encoding, trailing spaces, etc.).
-   **Configuration:**
    -   **Android Studio:** Support for `.editorconfig` is enabled by default. No additional actions required.
    -   **Visual Studio Code:** Ensure the `EditorConfig for VS Code` extension is installed.
-   **Action:** Open the `.editorconfig` file and ensure its settings match the project requirements. Standard settings for Kotlin/Android should already be in it.

### 1.2. Kotlin Code Style in Android Studio

-   **Purpose:** Applying the official JetBrains code style for Kotlin.
-   **Configuration:**
    1.  Open Android Studio settings: **File > Settings...**
    2.  Navigate to **Editor > Code Style > Kotlin**.
    3.  In the top right corner, click **"Set from..."**.
    4.  Select **"Kotlin style guide"**.
    5.  Click **Apply** and **OK**.
-   **Application:** To format a file according to the configured style, use the key combination `Ctrl+Alt+L`.

## 2. Static Code Analysis (Android Lint)

-   **Purpose:** Android Lint is a static analysis tool that checks source code for potential errors, performance issues, security, accessibility, and style problems.
-   **Configuration:**
    1.  Lint rules are configured in the `app/build.gradle.kts` file within the `android { ... }` block.
    2.  Example configuration to enable all checks but disable a specific rule and abort build on errors:
        ```kotlin
        android {
            // ...
            lint {
                checkAllWarnings = true
                abortOnError = true
                disable.add("SpecificWarningId") // Example of disabling a rule
            }
        }
        ```
-   **Baseline:**
    -   The `app/lint-baseline.xml` file in the project contains a list of existing issues. Lint uses it to report only *new* issues that appeared after creating the baseline. This allows gradual code quality improvement without fixing all old errors at once.
    -   To update the baseline, run the command: `./gradlew lint -Pandroid.lint.baselines.continue=true`
-   **Running:**
    -   To run the analysis, execute in the terminal:
        ```bash
        ./gradlew lintDebug
        ```
    -   The report will be generated in `app/build/reports/lint-results-debug.html`.

## 3. Build Configuration

### 3.1. Build Variants

-   **Purpose:** Android Studio allows working with two main build variants: `debug` and `release`.
-   **Switching:** Select the active variant in the **Build Variants** window (usually on the left sidebar).
-   **Configuration:** In `app/build.gradle.kts`, different parameters can be set for each build type. For example, add a suffix to the application ID for debug builds:
    ```kotlin
    android {
        // ...
        buildTypes {
            getByName("debug") {
                applicationIdSuffix = ".debug"
            }
            getByName("release") {
                // ...
            }
        }
    }
    ```

### 3.2. `local.properties` File

-   **Purpose:** This file is intended for storing developer-specific settings that should not be committed to version control (e.g., Android SDK path `sdk.dir`).
-   **Configuration:** Ensure `local.properties` is added to `.gitignore`. Android Studio usually manages this file automatically.

## 4. (Optional) Git Hooks for Local Checks

-   **Purpose:** Automatic script execution before committing to prevent pushing code with errors to the repository.
-   **Setup (Example for `pre-commit`):**
    1.  Create the `pre-commit` file in the `.git/hooks/` directory:
        ```bash
        touch .git/hooks/pre-commit
        ```
    2.  Make it executable:
        ```bash
        chmod +x .git/hooks/pre-commit
        ```
    3.  Add the following script to it, which runs tests and lint before committing:
        ```sh
        #!/bin/sh
        echo "Running pre-commit hook: running tests and lint..."

        # Run tests
        ./gradlew testDebugUnitTest
        if [ $? -ne 0 ]; then
            echo "Unit tests failed. Commit aborted."
            exit 1
        fi

        # Run lint
        ./gradlew lintDebug
        if [ $? -ne 0 ]; then
            echo "Lint checks failed. Commit aborted."
            exit 1
        fi

        echo "All checks passed. Proceeding with commit."
        exit 0
        ```
-   **Action:** Now, every time you attempt `git commit`, unit tests and lint checks will run first. If any task fails, the commit will be aborted.
