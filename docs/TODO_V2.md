# TODO V2 - FastMediaSorter v2

## üéØ Current Development Tasks

- [x] –£–±—Ä–∞—Ç—å –∑–∞—Å—Ç–∞–≤–∫—É –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ. –∫–∞–∫ —É –≤–µ—Ä—Å–∏–∏ 1 - —Å—Ä–∞–∑—É –ø—Ä–æ–≥—Ä–∞–º–º–∞ (—É–±—Ä–∞–Ω–∞ –∏–∫–æ–Ω–∫–∞ splash screen, –æ—Å—Ç–∞–≤–ª–µ–Ω Welcome —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)

- [x] –í–æ –≤—Ä–µ–º—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–∞–ø–æ–∫ –≤–µ—Ä—Å–∏—è 1 –Ω–∞—Ö–æ–¥–∏—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–∞–ø–∫–∏ —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏ ( –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–µ–ª–µ–≥—Ä–∞–º–º, –≤–æ—Ç—Å–∞–ø –∏ –¥—Ä—É–≥–∏–µ), –≥–¥–µ –µ—Å—Ç—å –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã. –í –≤–µ—Ä—Å–∏–∏ 2 –ø—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤–∏–∂—É —Ç–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø–∞–ø–∫–∏ . –ò —Ç–æ –Ω–µ –≤—Å–µ. –ù—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –≤—Å–µ–º –ø–∞–ø–∫–∞–º. –ï—Å–ª–∏ –æ–Ω–æ –¥–æ–ª–≥–æ - –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å–±–∞—Ä.

- [x] –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ —Å–¥–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–π –ø—Ä–æ–±–µ–ª –º–µ–∂–¥—Ü –∫–Ω–æ–ø–∫–∞–º–∏ "–Ω–∞–∑–∞–¥, –≤—ã—Ö–æ–¥" –∏ "–¥–æ–±–∞–≤–∏—Ç—å —Ä–µ—Å—É—Ä—Å"

- [x] –Ω–µ —É–¥–∂–∞–µ—Ç—Å—è –≤–≤–µ—Å—Ç–∏ IP.. –∫—É–¥–∞ —Ç–æ —Å–±–∏–≤–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —Ü–∏—Ñ—Ä—ã. –î–∞–≤–∞–π –æ—Å–ª–∞–±–∏–º –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–∏ IP.. —Ç–∞–º –º–æ–≥—É—Ç –±—ã—Ç—å —Ü–∏—Ñ—Ä—ã, —Ç–æ—á–∫–∏ –∏ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—è—Ç—É—é –∫–∞–∫ —Ç–æ—á–∫—É.

- [x] –§–∏–æ–ª–µ—Ç–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –Ω–µ—É–¥–æ–±–Ω–æ. –ù—É–∂–Ω–æ –±–æ–ª–µ–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç–∞—Ö: –ø—Ä–∏–º–µ—Ä —Ñ–æ—Ä–º–∞ –æ—Ç–±–æ—Ä–∞/—Ñ–∏–ª—å—Ç—Ä–∞ "—Å–±—Ä–æ—Å/–æ—Ç–º–µ–Ω–∞". –ù—É–∂–Ω–æ –≤–µ–∑–¥–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –Ω–µ–∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤. 

- [x] –ï—Å–ª–∏ –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–µ —Ä–µ—Å—É—Ä—Å–µ –Ω–µ—Ç, –Ω–µ –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –µ–µ –≤ —Ä–µ–∂–∏–º–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–±  —ç—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏–µ (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ)

- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª–∞–π–¥—à–æ—É. –ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É —Å—á–µ—Ç—á–∏–∫—É. –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å—á–µ—Ç—á–∏–∫–∞ –∑–∞–¥–∞–Ω –¥–ª—è —Ä–µ—Å—É—Ä—Å–∞ , –∞ –µ—Å–ª–∏ –Ω–µ—Ç - –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–∏ –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ –≤–æ –≤—Ä–µ–º—è —Å–ª–∞–π—à–æ—É - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ "–ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç—å –¥–æ –∫–æ–Ω—Ü–∞" —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ.. —Å–ª–∞–π–¥ –Ω–µ–ø–µ—Ä–µ–ª–∏—Å—Ç—ã–≤–∞–µ—Ç—Å—è, –ø–æ–∫–∞ –≤–∏–¥–µ–æ –∏–ª–∏ –∞—É–¥–∏–æ –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å.

- [x] –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —è –≤—Å–µ –µ—â–µ –≤–∏–∂—É —è—Ä–ª—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω - –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ —ç—Ç–æ (–¥–æ–±–∞–≤–ª–µ–Ω—ã –∞—Ç—Ä–∏–±—É—Ç—ã –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è splash screen –≤ Android 12+)

- [x] –ü—Ä–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ø–∞–ø–æ–∫ –Ω—É–∂–Ω–æ —Ç–∞–∫–∂–µ –∑–∞–≥–ª—è–¥—ã–≤–∞—Ç—å –≤ –ø–∞–ø–∫–∏ Android-Media. –í —á—Å—Ç–Ω–æ—Å—Ç–∏ –¥–æ–ª–∂–Ω–æ –Ω–∞–π—Ç–∏ Android-Media-com.WhatsApp-WhatsApp-Media-WhatsApp Images –∏ –¥—Ä—É–≥–∏–µ (–¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ Android/Media —Å –≥–ª—É–±–∏–Ω–æ–π 5 —É—Ä–æ–≤–Ω–µ–π)

- [x] –í –æ–∫–Ω–µ Add Resourse DMB –≤ –ø–æ–ª—è—Ö —Å–≤–µ—Ç–ª–æ—Å–µ—Ä—ã–π —Ü–≤–µ—Ç. –ù–∞ –±–µ–ª–æ–º —Ñ–æ–Ω–µ –ø–ª–æ—Ö–æ –≤–∏–¥–Ω–æ (—Ä–µ—à–µ–Ω–æ —á–µ—Ä–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã)

- [x] –ù—É–¥–Ω–æ —á—Ç–æ–±—ã –ø—Ä–æ–≥—Ä–∞–º–º–∞ –±–ª–∞–ª–∞ —Ç–µ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ - —Ç–µ–º–Ω—Ü—é –∏–ª–∏ —Å–≤–µ—Ç–ª—É—é . –ò–≤—Å–µ –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–æ–∂–Ω—ã –±—ã—Ç—å —Å–≤–µ—Ç–ª—ã–µ –∏–ª–∏ —Ç–µ–º–Ω—ã–µ, –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã —á–µ—Ä–µ–∑ values-night/colors.xml, —Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ª–µ–¥—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º)


### üö® Critical Bugs


- [x] **Password migration: plaintext ‚Üí encrypted (PARTIALLY)**
  - ‚úÖ Fixed fallback logic: now catches `IllegalArgumentException` (bad base-64)
  - ‚úÖ Plaintext passwords are used as is (backward compatibility)
  - ‚ö†Ô∏è TODO: Create a Room migration to re-encrypt existing plaintext passwords
  - ‚ö†Ô∏è TODO: Add a check when saving a resource (if plaintext ‚Üí re-encrypt)

- [ ] **SMB Authentication failed after password migration (SHOULD WORK)**
  - Problem: `STATUS_OTHER (0xc0000234): Authentication failed for 'sza'`
  - Cause fixed: empty passwords replaced with plaintext fallback
  - Required: test SMB connection after the fix

- [x] **Resource Path is updated when editing an SMB/SFTP resource**
  - ‚úÖ SMB: path is rebuilt as `smb://newServer/newShare` when server/share changes
  - ‚úÖ SFTP: path is rebuilt as `sftp://newHost:port/newPath` when host/port/path changes
  - Fixed in `EditResourceViewModel.saveChanges()`

### üîß Improvements and Refinements

- [ ] **SFTP: Add getting file size and date**
  - SftpClient.getFileAttributes() to get stat() data
  - Update SftpMediaScanner to use real size/createdDate values
  - Currently: size=0, createdDate=0 (placeholder values)

- [ ] **Mixed operations SMB‚ÜîSFTP**
  - Copy: SMB‚ÜíSFTP, SFTP‚ÜíSMB, SFTP‚ÜíLocal, Local‚ÜíSFTP
  - Move: same combinations
  - FileOperationUseCase: determine priority (destination type)

- [ ] **Progress bars for long operations**
  - Copy/Move: show file size and speed
  - Use WorkManager for background tasks
  - Notifications for completed operations

---

## üåê Network and Cloud Functions

- [ ] **Cloud: Google Drive API Integration**
  - Google Sign-In and Drive API
  - Folder browsing and file operations
  - OAuth2 flow and token storage
  - Adapt copy/move for cloud files

- [ ] **Cloud: Dropbox API Integration**
  - Dropbox SDK
  - Authentication and file access
  - Folder sync and operations
  - Compatibility with existing file operations

- [ ] **Network: Background synchronization**
  - WorkManager for periodic synchronization
  - Check for new/deleted files in network/cloud resources
  - Update fileCount and thumbnail cache
  - Synchronization status indicator

- [ ] **Network: Offline mode**
  - Cache thumbnails and metadata locally
  - Show cached data when there is no network
  - Offline status indication in the UI
  - Operation queue for subsequent synchronization

---

## üé® UI/UX Improvements

- [ ] **UI: Dark/Light theme**
  - Material Design 3 theming
  - System theme detection
  - Theme switcher in Settings
  - Test all screens in both themes

- [ ] **UI: Animations and transitions**
  - Screen transitions (slide, fade)
  - List animations (add, remove, reorder)
  - Button ripple effects
  - Progress indicators

- [ ] **UI: Empty states**
  - Empty resource list: "No resources added yet" + Add button
  - Empty file list: "No media files found in this folder"
  - Empty search: "No files match your criteria"
  - Network error: "Connection failed" + Retry button

- [ ] **UI: Accessibility**
  - Content descriptions for all images/icons
  - TalkBack screen reader support
  - Minimum touch target size (48dp) - check all buttons
  - High contrast mode support

---

## üß™ Testing

- [ ] **Testing: Unit tests**
  - All UseCase classes with JUnit
  - ViewModels with kotlinx-coroutines-test
  - Repository with mock dependencies
  - Goal: >80% code coverage for the domain layer

- [ ] **Testing: Instrumented tests**
  - Database operations with Room testing library
  - UI flows with Espresso
  - Navigation between screens
  - File operations with temporary test folders

- [ ] **Testing: Manual testing**
  - Android versions (8.0 - 14.0)
  - Different screen sizes (phone, tablet)
  - Different file types and sizes
  - Connection scenarios (slow network, no internet)

- [ ] **Testing: Security audit**
  - Check for hardcoded credentials
  - Validate input sanitization
  - Test file path traversal prevention
  - Check permission usage

---

## üêõ Optimization

- [ ] **Performance: Memory management**
  - Profiling with Android Profiler
  - Fix memory leaks (LeakCanary)
  - Optimize bitmap loading (downsampling)
  - Pagination for large file lists

- [ ] **Performance: Performance**
  - Profile CPU and frame drops
  - Optimize database queries (add indexes)
  - Background threads for heavy operations
  - Reduce overdraw in layouts

- [ ] **Performance: Battery**
  - Reduce background work
  - Efficient use of JobScheduler/WorkManager
  - Pause synchronization on low battery
  - Release resources in the background

- [ ] **Bug fix: Edge cases**
  - Empty folders, folders with many files (1000+)
  - Very long file names
  - Special characters in names
  - Corrupted media files

---

## üì¶ Release Preparation

### Build & Configuration

- [ ] **ProGuard/R8 configuration**
  - ProGuard rules for release build
  - Test obfuscated APK
  - Keep classes for reflection
  - Check functionality after ProGuard

- [ ] **APK signing**
  - Create a release keystore (if it doesn't exist)
  - Securely store the keystore (not in git)
  - Configure signing in build.gradle.kts
  - Test installation of the signed APK

- [ ] **APK size optimization**
  - Resource shrinking
  - Code shrinking (R8)
  - Vector drawables instead of PNG
  - Remove unused resources and dependencies
  - Consider App Bundle (.aab)

- [ ] **Versioning**
  - Update versionCode in build.gradle.kts
  - Update versionName (e.g., 2.0.0)
  - Follow semantic versioning (MAJOR.MINOR.PATCH)

- [ ] **Update dependencies**
  - Update libraries to the latest stable versions
  - Test after each update
  - Check for deprecated APIs
  - Fix breaking changes

### Documentation

- [ ] **Update README**
  - Update README.md with v2 features
  - Update README.ru.md and README.ua.md
  - Add screenshots of the new UI
  - Update build instructions

- [ ] **Update CHANGELOG**
  - Document all changes
  - Group by: Added, Changed, Fixed, Removed
  - Specify version and release date
  - Mention breaking changes

- [ ] **Create user documentation**
  - User guide (how to use the application)
  - Documentation of all functions and gestures
  - FAQ section
  - Troubleshooting guide

---

## üöÄ Google Play Store

### Material Preparation

- [ ] **Store listing**
  - App title (max 30 characters)
  - Short description (max 80 characters)
  - Full description (max 4000 characters)
  - Translation into Russian and Ukrainian

- [ ] **Screenshots**
  - 4-8 screenshots per screen (phone and tablet)
  - Key features (Main, Browse, Player)
  - Device frames and annotations
  - Localized screenshots (en, ru, uk)

- [ ] **Feature graphic**
  - 1024x500px design
  - App branding and key visual
  - Google Play design guidelines
  - Localized versions

- [ ] **App icon**
  - Adaptive icon (foreground + background)
  - Test on different launchers
  - Google Play guidelines
  - All sizes (mipmap-*)

- [ ] **Privacy Policy**
  - Update with v2 data usage
  - Mention permissions and their purposes
  - Contact information
  - Host online (GitHub Pages)

- [ ] **Content rating**
  - IARC questionnaire in Play Console
  - Age rating (e.g., Everyone)

### Release Process

- [ ] **Internal testing**
  - Upload APK/AAB to Play Console (Internal Testing)
  - Test installation and updates
  - Check all functions in the production build
  - ProGuard mapping file uploaded

- [ ] **Closed beta**
  - Promote to Closed Testing track
  - Add beta testers
  - Monitor crash reports
  - Collect feedback and fix issues

- [ ] **Production release**
  - Promote to Production track
  - Rollout percentage (start with 10-20%)
  - Monitor crash-free rate and ANR rate
  - Gradually increase to 100%

- [ ] **Post-release monitoring**
  - Play Console metrics (installs, crashes, ratings)
  - Respond to user reviews
  - Firebase Analytics events
  - Firebase Crashlytics reports

---

## üìä Project Status


**In progress:**
- üîÑ SFTP file attributes (size, date)
- üîÑ Mixed operations SMB‚ÜîSFTP
- üîÑ On-device testing

**Next priorities:**
1. Complete SFTP improvements
2. Manual on-device testing
3. Performance optimization
4. Prepare materials for Google Play
5. Beta testing
